<% chatbot     = local_assigns.fetch(:chatbot) { @chatbot } %>
<% modal_id    = local_assigns.fetch(:modal_id, "product_modal") %>
<% product     = local_assigns.fetch(:product) { chatbot.products.build } %>
<% title       = local_assigns.fetch(:title) do
     key = product.persisted? ? "edit_title" : "create_title"
     t("chatbots.products.modal.#{key}")
   end %>
<% submit_label = local_assigns.fetch(:submit_label) do
     key = product.persisted? ? "update_button" : "create_button"
     t("chatbots.products.modal.#{key}")
   end %>

<dialog id="<%= modal_id %>" class="modal">
  <div class="modal-box">
    <form method="dialog">
      <button class="btn btn-sm btn-circle btn-ghost absolute right-2 top-2">âœ•</button>
    </form>

    <h3 class="text-lg font-bold"><%= title %></h3>
    <p class="py-4 text-sm"><%= t("chatbots.products.modal.instructions") %></p>

    <%= render "chatbots/products/form", chatbot: chatbot, product: product, submit_label: submit_label %>
  </div>
</dialog>
