<% modal_id         = local_assigns.fetch(:modal_id, "responses_modal") %>
<% chatbot_response = local_assigns.fetch(:chatbot_response) { @response || @chatbot.responses.build } %>
<% chatbot_record   = local_assigns.fetch(:chatbot) { chatbot_response.try(:chatbot) || @chatbot } %>
<% title            = local_assigns.fetch(:title) do
                        chatbot_response.persisted? ? t(".edit_faq", default: "Edit FAQ") : t(".add_new_faq")
                      end %>
<% description      = local_assigns.fetch(:description) do
                        if chatbot_response.persisted?
                          t(".edit_description", default: "Update the question and answer.")
                        else
                          t(".description", chatbot_name: chatbot_record&.agent_name)
                        end
                      end %>
<% submit_label     = local_assigns.fetch(:submit_label) do
                        if chatbot_response.persisted?
                          t(".update_submit", default: "Update FAQ")
                        else
                          t(".create_submit", default: "Create FAQ")
                        end
                      end %>

<dialog id="<%= modal_id %>" class="modal">
  <div class="modal-box">
    <form method="dialog">
      <button class="btn btn-sm btn-circle btn-ghost absolute right-2 top-2">âœ•</button>
    </form>

    <h3 class="text-lg font-bold"><%= title %></h3>
    <p class="py-4"><%= description %></p>

    <%= render "chatbots/responses/form", chatbot_response: chatbot_response, submit_label: submit_label %>
  </div>
</dialog>
