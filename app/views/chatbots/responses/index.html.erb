<% content_for :sub_navigation do %>
  <%= render "shared/chatbot_header" %>
<% end %>

<% content_for :sidebar do %>
  <div class="w-64 shrink-0">
    <nav class="menu w-full bg-base-200 rounded-box">
      <li>
        <%= link_to chatbot_sources_path(@chatbot), class: "" do %>
          Documents
        <% end%>
      </li>

      <% if FeatureFlags.v2_enabled_for?(current_user) %>
        <li>
          <%= link_to chatbot_responses_path(@chatbot), class: "menu-active" do %>
            FAQs
          <% end%>
        </li>
      <% else %>
        <li><a class="active focus:outline-none focus-visible:ring focus-visible:ring-primary/50"><%= t('.sidebar_files_link') %></a></li>
      <% end %>
    </nav>
  </div>
<% end %>

<div class="flex justify-between">
  <h1 class="text-3xl font-bold mb-8"><%= t('.title') %></h1>
  <%= render partial: "chatbots/responses/actions", locals: { chatbot: @chatbot } %>
</div>

<div class="flex gap-6">
  <!-- Left sidebar -->
  <%= yield :sidebar %>

  <!-- Main content area -->
  <%= turbo_stream_from [ @chatbot, :responses ] %>
  <div class="flex-1">
    <%= render "responses_list", chatbot: @chatbot, pagy: @pagy, responses: @responses, is_processing_documents: @is_processing_documents %>
  </div>

</div>
