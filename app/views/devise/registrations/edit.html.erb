<div class="container mx-auto max-w-5xl px-4 py-8">
  <!-- Settings heading -->
  <h1 class="text-3xl font-bold mb-8">Account Settings</h1>

  <!-- Flex container for sidebar and main content -->
  <div class="flex gap-6">
    <!-- Left sidebar -->
    <div class="w-64 shrink-0">
            <div class="mb-2">
        <%= link_to "Go Back", :back, class: "link link-primary" %>
      </div>
      <nav class="menu w-full bg-base-200 rounded-box">
        <li><a class="active focus:outline-none focus-visible:ring focus-visible:ring-primary/50">Account</a></li>
      </nav>
    </div>

    <!-- Main content area -->
    <div class="flex-1">
      <div class="card bg-base-100 shadow-md">
        <div class="card-body">
          <h2 class="card-title text-2xl mb-6">Edit Account</h2>

          <%= form_for(resource, as: resource_name, url: registration_path(resource_name), 
                      html: { method: :put }, 
                      class: "space-y-6",
                      data: { turbo: true }) do |f| %>
            <%= render "devise/shared/error_messages", resource: resource %>

            <!-- Email field -->
            <div class="form-control w-full mb-6">
              <%= f.label :email, class: "label" %>
              <%= f.email_field :email, autofocus: true, autocomplete: "email", 
                  class: "input input-bordered w-full focus:outline-none focus-visible:ring focus-visible:ring-primary/50" %>
            </div>

            <!-- Name field -->
            <div class="form-control w-full mb-6">
              <%= f.label :name, class: "label" %>
              <%= f.text_field :name, 
                  class: "input input-bordered w-full focus:outline-none focus-visible:ring focus-visible:ring-primary/50" %>
            </div>

            <!-- City field -->
            <div class="form-control w-full mb-6">
              <%= f.label :city, class: "label" %>
              <%= f.text_field :city, 
                  class: "input input-bordered w-full focus:outline-none focus-visible:ring focus-visible:ring-primary/50" %>
            </div>

            <!-- Country field -->
            <div class="form-control w-full mb-6">
              <%= f.label :country, class: "label" %>
              <%= f.text_field :country, 
                  class: "input input-bordered w-full focus:outline-none focus-visible:ring focus-visible:ring-primary/50" %>
            </div>

            <% if devise_mapping.confirmable? && resource.pending_reconfirmation? %>
              <div class="alert alert-info">
                Currently waiting confirmation for: <%= resource.unconfirmed_email %>
              </div>
            <% end %>

            <!-- New Password field -->
            <div class="form-control w-full mb-6">
              <%= f.label :password, class: "label" %>
              <div class="text-sm text-gray-500 mb-2">(leave blank if you don't want to change it)</div>
              <%= f.password_field :password, autocomplete: "new-password",
                  class: "input input-bordered w-full focus:outline-none focus-visible:ring focus-visible:ring-primary/50" %>
              <% if @minimum_password_length %>
                <div class="text-sm text-gray-500 mt-2"><%= @minimum_password_length %> characters minimum</div>
              <% end %>
            </div>

            <!-- Password Confirmation field -->
            <div class="form-control w-full mb-6">
              <%= f.label :password_confirmation, class: "label" %>
              <%= f.password_field :password_confirmation, autocomplete: "new-password",
                  class: "input input-bordered w-full focus:outline-none focus-visible:ring focus-visible:ring-primary/50" %>
            </div>

            <!-- Current Password field -->
            <div class="form-control w-full mb-6">
              <%= f.label :current_password, class: "label" %>
              <div class="text-sm text-gray-500 mb-2">(we need your current password to confirm your changes)</div>
              <%= f.password_field :current_password, autocomplete: "current-password",
                  class: "input input-bordered w-full focus:outline-none focus-visible:ring focus-visible:ring-primary/50" %>
            </div>

            <!-- Update button -->
            <div class="card-actions justify-end mt-8">
              <%= f.submit "Update", class: "btn btn-primary focus:outline-none focus-visible:ring focus-visible:ring-primary/50" %>
            </div>
          <% end %>
        </div>
      </div>

      <div class="divider divider-error my-10">
        <span class="text-error font-bold">Danger Zone</span>
      </div>

      <!-- Delete Account Card -->
      <div class="card bg-base-100 shadow-md border-error">
        <div class="card-body">
          <h2 class="card-title text-error text-2xl">Delete Account</h2>
          <p>
            This action is irreversible. All data associated with your account will be permanently deleted.
          </p>
          <div class="card-actions mt-4">
            <%= button_to "Delete my account", 
                registration_path(resource_name), 
                method: :delete, 
                class: "btn btn-error focus:outline-none focus-visible:ring focus-visible:ring-error/50",
                data: { turbo_confirm: "Are you sure you want to delete your account?" } %>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
