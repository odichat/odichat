<div id="message_<%= message.id %>">
  <% if message.sender == "user" %>
    <div class="chat chat-start">
      <div class="chat-header text-gray-500">
        <%# TODO: various queries per message, fix this %>
        <%= message.chat.contact.name %>
      </div>
      <div class="chat-bubble relative">
        <%= markdown(message.content) %>
      </div>
    </div>
  <% end %>

  <% if message.sender == "assistant" %>
    <div class="chat chat-end">
      <div class="chat-header text-gray-500">
        <%= message.message_type.humanize %>
      </div>
      <div class="chat-bubble chat-bubble-primary"><%= markdown(message.content) %></div>
      <div class="chat-footer opacity-50 relative mr-2">
        <% if message.status == "sent" %>
          <%= icon "check", variant: "outline", class: "size-4 absolute top-0 left-0 text-gray-500" %>
        <% elsif message.status == "delivered" %>
          <%= icon "check", variant: "outline", class: "size-4 absolute top-0 left-0 text-gray-500" %>
          <%= icon "check", variant: "outline", class: "size-4 absolute top-0 left-1 text-gray-500" %>
        <% elsif message.status == "read" %>
          <%= icon "check", variant: "outline", class: "size-4 absolute top-0 left-0 text-blue-500" %>
          <%= icon "check", variant: "outline", class: "size-4 absolute top-0 left-1 text-blue-500" %>
        <% end%>
      </div>
    </div>
  <% end %>
</div>
